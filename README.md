# Duplicate Detector 5000

Ecore ID duplicate detection made easy.

![version](https://img.shields.io/badge/version-1.0-brightgreen)
![coverage](https://img.shields.io/badge/coverage-95%00-brightgreen)
![building](https://img.shields.io/badge/build-passing-brightgreen)

## About

The *Duplicate Detector [5000](https://youtu.be/UKygju476tM?t=18)* (*DD-5000*) is a software that analyzes model sets created with [TouchCORE](http://touchcore.cs.mcgill.ca/) and searches duplicate ecore identifiers.  
In TouchCORE models, ecore identifiers are generated randomly. Therefore, collisions accross multiple models suggest plagiarism.  
The *DD-5000* operates on two input directories (one for templates to blacklist from duplicate search and one for model submissions). The findings are presented textually.

Sample output:  
```
List of collisions: (template IDs filtered)
_MRBUl4vZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
_MRBUmYvZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
_MRBUmovZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
_MQ7N8IvZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
_H1C4gIvZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
_LS-_AovZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
_MQ7N8YvZEeuyz5hrMJJE7Q: [Richard Roe | John Doe]
...
```

## Usage

### Data Preparation

Input models must be brought into a certain format. This is taken care of by the [data preparation script](dataprep.sh).

Instructions:

 * Download the zipped mycourses submissions. (A single folder, containing all zipped submissions) + an index html file.
 * Run the [preparation script](dataprep.sh). (This creates one folder per student, named by the *student first name **space** student last name*: 
```bash
./dataprep.sh source-folder target-folder
```  
   * ```source-folder```: The location of th mycourses download folder, containing all student submissions as zip files. E.g. ```/tmp/mycourses```
   * ```target-folder```: The location where unzipped, cleaned, named students submissions shall be stored. E.g. ```/tmp/clean-finals```


 > **Note**: This script also removes meta / bloat files not needed for a subsequent duplicate analysis.

### Compiling / Running the Analyzer

Once the input data is cleaned, you can run the DD-5000 java program. It searches for ecore identifier collisions in student submissions and prints the findings to screen. The java code is located in the [analyzer](analyzer) directory.

Build / usage instructions:

 * Make sure JDK-11 or higher is installed.
 * Place the sample files for the mandatory unit tests at the right location: 
   * Unzip [DD5000-test-files](DD5000-test-files.zip).
   * Place ```TemplateTestDir``` and ```SubmissionTestDir``` in ```/tmp/```
 * Compile the sources:
   * ```mvn clean package```
 * Run the DD-5000. You can either:
   * ... run using maven:  
```mvn exec:java "-Dexec.args=/path/to/templates/folder /path/to/submissions/folder"```
   * ... run using JAR: (created by ```mvn clean package``` at ```analyzer/target```)  
```java -jar DuplicateDetector5000.jar /path/to/templates/folder /path/to/submissions/folder```



 > **Note:** ```/path/to/submissions/folder``` must follow the structure as generated by the *[Data Preparation](#data-preparation)* script.

##  Implementation Details

This section provides a general overview on the duplicate detection algorithm, as implemented:

 1. Create ecore identifier blacklist. Extract ecore identifiers of all deep ram files found in template directory.
 2. Iterate over all submissions. The folder name serves as author identifier (student name). Create a ```Map<String, Set<String>>``` where the *key* equals the author and each *value* is a ```Set``` of all ecore identifiers of all deep ram files in the author's submission folder. Blacklisted ecore identifiers are not included in the ```Set```.
 3. Iterate over the map and create another ```Map<String, Set<String>>``` where the *key* equals the ecore identifier and each *value* is a ```Set``` of all author identifiers using that ecore identifier.
 4. Print a list of all ecore identifiers (and ```Set``` content) where the set size is greater 1. Any of these occurrences suggests plagiarism.

 > **Note**: For further implementation details, consult the [JavaDoc](https://kartoffelquadrat.github.io/DD-5000/).

## Contact / Pull Requests

 * Author: Maximilian Schiedermeier ![email](email.png)
 * Github: Kartoffelquadrat
 * Webpage: https://www.cs.mcgill.ca/~mschie3
 * License: [MIT](https://opensource.org/licenses/MIT)
